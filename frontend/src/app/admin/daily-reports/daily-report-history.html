<div class="daily-report-history-container">
  <app-admin-header title="My Daily Reports">
    <!-- 只保留 New Report 按鈕 -->
    <a class="btn primary" routerLink="/admin/daily-reports/new">New Report</a>
  </app-admin-header>

  <section class="filters-card">
    <div class="filter-group">
      <label>
        From
        <input type="date" [(ngModel)]="filters.date_from" name="historyFrom" />
      </label>
      <label>
        To
        <input type="date" [(ngModel)]="filters.date_to" name="historyTo" />
      </label>
      <label>
        Status
        <select [(ngModel)]="filters.status" name="historyStatus">
          <option value="">Any status</option>
          <option value="Solved">Solved</option>
          <option value="Not Solved">Not Solved</option>
          <option value="Complete">Complete</option>
        </select>
      </label>
    </div>
    <div class="filter-actions">
      <button type="button" class="btn primary" (click)="applyFilters()">Apply</button>
      <button type="button" class="btn" (click)="clearFilters()">Reset</button>
    </div>
  </section>

  <div *ngIf="errorMessage" class="alert alert-error">{{ errorMessage }}</div>

  <div class="history-table">
    <table>
      <thead>
        <tr>
          <th>ID</th>
          <th>Date</th>
          <th>Clients</th>
          <th>Created</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let report of reports">
          <td>{{ report.report_id }}</td>
          <td>{{ report.report_date }}</td>
          <td>{{ report.client_count }}</td>
          <td>{{ report.created_at | date: 'medium' }}</td>
        </tr>
        <tr *ngIf="!reports.length && !isLoading">
          <td colspan="4" class="muted">No reports found.</td>
        </tr>
      </tbody>
    </table>
    <div *ngIf="isLoading" class="loading">Loading...</div>
    <div *ngIf="meta" class="list-meta">Total: {{ meta.total }} | Page {{ meta.page }} / {{ meta.totalPages }}</div>
    <div *ngIf="meta && meta.totalPages > 1" class="pagination">
      <button type="button" class="btn" (click)="prevPage()" [disabled]="currentPage <= 1">Previous</button>
      <span>Page {{ currentPage }} of {{ meta.totalPages }}</span>
      <button type="button" class="btn" (click)="nextPage()" [disabled]="meta && currentPage >= meta.totalPages">Next</button>
    </div>
  </div>

</div>
