<div class="admin-dashboard-container">
  <h1>Admin Dashboard</h1>
  
  <!-- 顯示現在登錄的是哪個用戶 -->
  <div class="user-banner" *ngIf="currentUserName || currentUserId !== null">
    
    <span>Logged in as: 
      <strong>{{ currentUserName || ('User #' + currentUserId) }}</strong>
      <ng-container *ngIf="currentUserName && currentUserId !== null">
        (ID: {{ currentUserId }})
      </ng-container>
    </span>
  </div>

    <!-- 新增：右上工具列 退出登錄按鈕 louout button -->
  <div class="admin-toolbar" style="display:flex; justify-content:flex-end; gap:12px; margin:8px 0 12px;">
    <!-- <button class="btn" routerLink="/admin/staff-management">Go to Staff</button> -->
    <!-- <button class="btn secondary" routerLink="/">Return to Home</button> -->
    <button class="btn primary" (click)="logout()">Account logout</button>
  </div>



  <nav class="admin-nav">
    <a routerLink="/admin/staff-management" class="nav-link">Staff Management</a>
    <a routerLink="/admin/order-management" class="nav-link">Order Management</a>
    <a routerLink="/admin/quote-management" class="nav-link">Quote Management</a>
    <a routerLink="/admin/log-viewer" class="nav-link">Log Viewer</a>
    <a routerLink="/admin/staff-activity" class="nav-link">Staff Activity Log</a>
    <!-- <a routerLink="/admin/timesheet-review" class="nav-link">Timesheet Review</a> -->
  </nav>

  <!--
  <div class="summary-row">
    <div class="summary-card summary-enquiries">Total Enquiries: {{ enquiries.length }}</div>
    <div class="summary-card summary-quotes">Total Quotes & Bookings: {{ quotesBookings.length }}</div>
    <div class="summary-card summary-pending">Pending: {{ getPendingCount() }}</div>
    <div class="summary-card summary-staff">Active Staff: {{ activeStaff }}</div>
    <div class="summary-card summary-clients">Total Clients: {{ getTotalClients() }}</div>
  </div>
  -->

  <div class="quick-link-grid">
    <div class="quick-card">
      <h3>Timesheet Entry</h3>
      <p>Create or capture a new timesheet entry.</p>
      <a class="quick-btn" routerLink="/admin/timesheets/new">New Timesheet</a>
    </div>
    <div class="quick-card">
      <h3>Timesheet Register</h3>
      <p>Review submissions, signatures, and approvals.</p>
      <a class="quick-btn" routerLink="/admin/timesheets">View Timesheets</a>
    </div>
    <div class="quick-card">
      <h3>My Timesheets</h3>
      <p>See your previously submitted timesheets.</p>
      <a class="quick-btn" routerLink="/admin/my-timesheets">View My History</a>
    </div>
    <div class="quick-card">
      <h3>Daily Reports</h3>
      <p>Compile or audit daily activity reports.</p>
      <div class="quick-card-actions">
        <a class="quick-btn" routerLink="/admin/daily-reports">All Reports</a>
        <a class="quick-btn secondary" routerLink="/admin/my-daily-reports">My Reports</a>
        <a class="quick-btn secondary" routerLink="/admin/my-daily-reports-v2">My Reports2</a>
      </div>
    </div>
  </div>

  <!--
  <div class="search-container">
    <label class="sr-only" for="admin-search">Search</label>
    <select [(ngModel)]="selectedField" class="search-dropdown" name="searchField" aria-label="Filter field">
      <option value="">All Fields</option>
      <option value="clientName">Client Name</option>
      <option value="email">Email</option>
      <option value="pickupSuburb">Pickup Suburb</option>
      <option value="deliverySuburb">Delivery Suburb</option>
      <option value="phone">Phone</option>
      <option value="status">Status</option>
      <option value="message">Message</option>
    </select>
    <input
      id="admin-search"
      type="text"
      [(ngModel)]="searchTerm"
      placeholder="Search..."
      class="search-bar"
    />
  </div>
  -->

  <!--
  <div class="table-section">
    <h2>Quotes & Bookings</h2>
    <div class="table-toolbar">
      <button (click)="exportToExcel('quote')">Export Excel</button>
      <button (click)="exportToCSV('quote')">Export CSV</button>
      <button (click)="exportToPDF('quote')">Export PDF</button>
    </div>
    <table>
      <thead>
        <tr>
          <th>ID</th>
          <th>Client Name</th>
          <th>Email</th>
          <th>Item Count</th>
          <th>Pickup</th>
          <th>Delivery</th>
          <th>Phone</th>
          <th>Status</th>
          <th>Message</th>
          <th>Action</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let q of filterItems(quotesBookings)">
          <td>{{ q.id }}</td>
          <td>{{ q.clientName }}</td>
          <td>{{ q.email }}</td>
          <td>{{ q.itemCount }}</td>
          <td>{{ q.pickupSuburb }}</td>
          <td>{{ q.deliverySuburb }}</td>
          <td>{{ q.phone }}</td>
          <td>{{ q.status }}</td>
          <td>{{ q.message }}</td>
          <td class="table-actions">
            <button (click)="updateStatus(q,'Not Started')">Not Started</button>
            <button (click)="updateStatus(q,'In Progress')">In Progress</button>
            <button (click)="updateStatus(q,'Resolved')">Resolved</button>
            <button class="delete" (click)="deleteEntry(q,'quote')">Delete</button>
          </td>
        </tr>
      </tbody>
    </table>
  </div>
  -->

  <!--
  <div class="table-section">
    <h2>Customer Enquiries</h2>
    <div class="table-toolbar">
      <button (click)="exportToExcel('enquiry')">Export Excel</button>
      <button (click)="exportToCSV('enquiry')">Export CSV</button>
      <button (click)="exportToPDF('enquiry')">Export PDF</button>
    </div>
    <table>
      <thead>
        <tr>
          <th>ID</th>
          <th>Client Name</th>
          <th>Email</th>
          <th>Message</th>
          <th>Date</th>
          <th>Action</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let e of filterItems(enquiries)">
          <td>{{ e.id }}</td>
          <td>{{ e.clientName }}</td>
          <td>{{ e.email }}</td>
          <td>{{ e.message }}</td>
          <td>{{ e.submittedDate }}</td>
          <td class="table-actions">
            <button class="delete" (click)="deleteEntry(e,'enquiry')">Delete</button>
          </td>
        </tr>
      </tbody>
    </table>
  </div>
  -->

  <!--
  <div class="table-section">
    <h2>Recycle Bin (Auto-Delete after 30 Days)</h2>
    <table>
      <thead>
        <tr>
          <th>ID</th>
          <th>Type</th>
          <th>Client Name</th>
          <th>Email</th>
          <th>Deleted At</th>
          <th>Action</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let item of recycleBin">
          <td>{{ item.id }}</td>
          <td>{{ item.type }}</td>
          <td>{{ item.clientName || '-' }}</td>
          <td>{{ item.email || '-' }}</td>
          <td>{{ item.deletedAt | date:'short' }}</td>
          <td class="table-actions">
            <button (click)="restoreItem(item)">Restore</button>
            <button class="delete" (click)="permanentDelete(item)">Delete Permanently</button>
          </td>
        </tr>
      </tbody>
    </table>
  </div>
  -->
</div>


